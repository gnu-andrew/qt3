<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- /home/espenr/tmp/qt-3.3.8-espenr-2499/qt-x11-free-3.3.8/src/sql/qsqldatabase.cpp:353 -->
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>QSqlDatabase Class</title>
<style type="text/css"><!--
fn { margin-left: 1cm; text-indent: -1cm; }
a:link { color: #004faf; text-decoration: none }
a:visited { color: #672967; text-decoration: none }
body { background: #ffffff; color: black; }
--></style>
</head>
<body>

<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr bgcolor="#E5E5E5">
<td valign=center>
 <a href="index.html">
<font color="#004faf">Home</font></a>
 | <a href="classes.html">
<font color="#004faf">All&nbsp;Classes</font></a>
 | <a href="mainclasses.html">
<font color="#004faf">Main&nbsp;Classes</font></a>
 | <a href="annotated.html">
<font color="#004faf">Annotated</font></a>
 | <a href="groups.html">
<font color="#004faf">Grouped&nbsp;Classes</font></a>
 | <a href="functions.html">
<font color="#004faf">Functions</font></a>
</td>
<td align="right" valign="center"><img src="logo32.png" align="right" width="64" height="32" border="0"></td></tr></table><h1 align=center>QSqlDatabase Class Reference<br><small>[<a href="sql.html">sql module</a>]</small></h1>

<p>The QSqlDatabase class is used to create SQL database
connections and to provide transaction handling.
<a href="#details">More...</a>
<p><tt>#include &lt;<a href="qsqldatabase-h.html">qsqldatabase.h</a>&gt;</tt>
<p>Inherits <a href="qobject.html">QObject</a>.
<p><a href="qsqldatabase-members.html">List of all member functions.</a>
<h2>Public Members</h2>
<ul>
<li class=fn><a href="#~QSqlDatabase"><b>~QSqlDatabase</b></a> ()</li>
<li class=fn>bool <a href="#open"><b>open</b></a> ()</li>
<li class=fn>bool <a href="#open-2"><b>open</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;user, const&nbsp;QString&nbsp;&amp;&nbsp;password )</li>
<li class=fn>void <a href="#close"><b>close</b></a> ()</li>
<li class=fn>bool <a href="#isOpen"><b>isOpen</b></a> () const</li>
<li class=fn>bool <a href="#isOpenError"><b>isOpenError</b></a> () const</li>
<li class=fn>QStringList <a href="#tables-2"><b>tables</b></a> () const</li>
<li class=fn>QStringList <a href="#tables"><b>tables</b></a> ( QSql::TableType&nbsp;type ) const</li>
<li class=fn>QSqlIndex <a href="#primaryIndex"><b>primaryIndex</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;tablename ) const</li>
<li class=fn>QSqlRecord <a href="#record"><b>record</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;tablename ) const</li>
<li class=fn>QSqlRecord <a href="#record-2"><b>record</b></a> ( const&nbsp;QSqlQuery&nbsp;&amp;&nbsp;query ) const</li>
<li class=fn>QSqlRecordInfo <a href="#recordInfo"><b>recordInfo</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;tablename ) const</li>
<li class=fn>QSqlRecordInfo <a href="#recordInfo-2"><b>recordInfo</b></a> ( const&nbsp;QSqlQuery&nbsp;&amp;&nbsp;query ) const</li>
<li class=fn>QSqlQuery <a href="#exec"><b>exec</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;query = QString::null ) const</li>
<li class=fn>QSqlError <a href="#lastError"><b>lastError</b></a> () const</li>
<li class=fn>bool <a href="#transaction"><b>transaction</b></a> ()</li>
<li class=fn>bool <a href="#commit"><b>commit</b></a> ()</li>
<li class=fn>bool <a href="#rollback"><b>rollback</b></a> ()</li>
<li class=fn>virtual void <a href="#setDatabaseName"><b>setDatabaseName</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;name )</li>
<li class=fn>virtual void <a href="#setUserName"><b>setUserName</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;name )</li>
<li class=fn>virtual void <a href="#setPassword"><b>setPassword</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;password )</li>
<li class=fn>virtual void <a href="#setHostName"><b>setHostName</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;host )</li>
<li class=fn>virtual void <a href="#setPort"><b>setPort</b></a> ( int&nbsp;p )</li>
<li class=fn>void <a href="#setConnectOptions"><b>setConnectOptions</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;options = QString::null )</li>
<li class=fn>QString <a href="#databaseName"><b>databaseName</b></a> () const</li>
<li class=fn>QString <a href="#userName"><b>userName</b></a> () const</li>
<li class=fn>QString <a href="#password"><b>password</b></a> () const</li>
<li class=fn>QString <a href="#hostName"><b>hostName</b></a> () const</li>
<li class=fn>QString <a href="#driverName"><b>driverName</b></a> () const</li>
<li class=fn>int <a href="#port"><b>port</b></a> () const</li>
<li class=fn>QString <a href="#connectOptions"><b>connectOptions</b></a> () const</li>
<li class=fn>QSqlDriver * <a href="#driver"><b>driver</b></a> () const</li>
</ul>
<h2>Static Public Members</h2>
<ul>
<li class=fn>QSqlDatabase * <a href="#addDatabase"><b>addDatabase</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;type, const&nbsp;QString&nbsp;&amp;&nbsp;connectionName = defaultConnection )</li>
<li class=fn>QSqlDatabase * <a href="#addDatabase-2"><b>addDatabase</b></a> ( QSqlDriver&nbsp;*&nbsp;driver, const&nbsp;QString&nbsp;&amp;&nbsp;connectionName = defaultConnection )</li>
<li class=fn>QSqlDatabase * <a href="#database"><b>database</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;connectionName = defaultConnection, bool&nbsp;open = TRUE )</li>
<li class=fn>void <a href="#removeDatabase"><b>removeDatabase</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;connectionName )</li>
<li class=fn>void <a href="#removeDatabase-2"><b>removeDatabase</b></a> ( QSqlDatabase&nbsp;*&nbsp;db )</li>
<li class=fn>bool <a href="#contains"><b>contains</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;connectionName = defaultConnection )</li>
<li class=fn>QStringList <a href="#drivers"><b>drivers</b></a> ()</li>
<li class=fn>void <a href="#registerSqlDriver"><b>registerSqlDriver</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;name, const&nbsp;QSqlDriverCreatorBase&nbsp;*&nbsp;creator )</li>
<li class=fn>bool <a href="#isDriverAvailable"><b>isDriverAvailable</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;name )</li>
</ul>
<h2>Properties</h2>
<ul>
<li class=fn>QString <a href="#connectOptions-prop"><b>connectOptions</b></a>&nbsp;- the database connect options</li>
<li class=fn>QString <a href="#databaseName-prop"><b>databaseName</b></a>&nbsp;- the name of the database</li>
<li class=fn>QString <a href="#hostName-prop"><b>hostName</b></a>&nbsp;- the host name where the database resides</li>
<li class=fn>QString <a href="#password-prop"><b>password</b></a>&nbsp;- the password used to connect to the database</li>
<li class=fn>int <a href="#port-prop"><b>port</b></a>&nbsp;- the port used to connect to the database</li>
<li class=fn>QString <a href="#userName-prop"><b>userName</b></a>&nbsp;- the user name connected to the database</li>
</ul>
<h2>Protected Members</h2>
<ul>
<li class=fn><a href="#QSqlDatabase"><b>QSqlDatabase</b></a> ( const&nbsp;QString&nbsp;&amp;&nbsp;type, const&nbsp;QString&nbsp;&amp;&nbsp;name, QObject&nbsp;*&nbsp;parent = 0, const&nbsp;char&nbsp;*&nbsp;objname = 0 )</li>
<li class=fn><a href="#QSqlDatabase-2"><b>QSqlDatabase</b></a> ( QSqlDriver&nbsp;*&nbsp;driver, QObject&nbsp;*&nbsp;parent = 0, const&nbsp;char&nbsp;*&nbsp;objname = 0 )</li>
</ul>
<hr><a name="details"></a><h2>Detailed Description</h2>


The QSqlDatabase class is used to create SQL database
connections and to provide transaction handling.
<p> 


<p> Note that transaction handling is not supported by every SQL
database. You can find out whether transactions are supported
using <a href="qsqldriver.html#hasFeature">QSqlDriver::hasFeature</a>().
<p> The QSqlDatabase class provides an abstract interface for
accessing many types of database backends. Database-specific
drivers are used internally to actually access and manipulate
data, (see <a href="qsqldriver.html">QSqlDriver</a>). Result set objects provide the interface
for executing and manipulating SQL queries (see <a href="qsqlquery.html">QSqlQuery</a>).
<p>See also <a href="database.html">Database Classes</a>.

<hr><h2>Member Function Documentation</h2>
<h3 class=fn><a name="QSqlDatabase"></a>QSqlDatabase::QSqlDatabase ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;type, const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;name, <a href="qobject.html">QObject</a>&nbsp;*&nbsp;parent = 0, const&nbsp;char&nbsp;*&nbsp;objname = 0 )<tt> [protected]</tt>
</h3>
Creates a QSqlDatabase connection called <em>name</em> that uses the
driver referred to by <em>type</em>, with the parent <em>parent</em> and the
object name <em>objname</em>. If the <em>type</em> is not recognized, the
database connection will have no functionality.
<p> The currently available drivers are:
<p> <center><table cellpadding="4" cellspacing="2" border="0">
<tr bgcolor="#a2c511"> <th valign="top">Driver Type <th valign="top">Description
<tr bgcolor="#f0f0f0"> <td valign="top"><a href="sql-driver.html#QODBC3">QODBC3</a> <td valign="top">ODBC Driver (includes Microsoft SQL Server)
<tr bgcolor="#d0d0d0"> <td valign="top"><a href="sql-driver.html#QOCI8">QOCI8</a> <td valign="top">Oracle Call Interface Driver
<tr bgcolor="#f0f0f0"> <td valign="top"><a href="sql-driver.html#QPSQL7">QPSQL7</a> <td valign="top">PostgreSQL v6.x and v7.x Driver
<tr bgcolor="#d0d0d0"> <td valign="top"><a href="sql-driver.html#QTDS7">QTDS7</a> <td valign="top">Sybase Adaptive Server
<tr bgcolor="#f0f0f0"> <td valign="top"><a href="sql-driver.html#QMYSQL3">QMYSQL3</a> <td valign="top">MySQL Driver
<tr bgcolor="#d0d0d0"> <td valign="top"><a href="sql-driver.html#QDB2">QDB2</a> <td valign="top">IBM DB2, v7.1 and higher
<tr bgcolor="#f0f0f0"> <td valign="top"><a href="sql-driver.html#QSQLITE">QSQLITE</a> <td valign="top">SQLite Driver
<tr bgcolor="#d0d0d0"> <td valign="top"><a href="sql-driver.html#QIBASE">QIBASE</a> <td valign="top">Borland Interbase Driver
</table></center>
<p> Additional third party drivers, including your own custom drivers,
can be loaded dynamically.
<p> <p>See also <a href="#registerSqlDriver">registerSqlDriver</a>().

<h3 class=fn><a name="QSqlDatabase-2"></a>QSqlDatabase::QSqlDatabase ( <a href="qsqldriver.html">QSqlDriver</a>&nbsp;*&nbsp;driver, <a href="qobject.html">QObject</a>&nbsp;*&nbsp;parent = 0, const&nbsp;char&nbsp;*&nbsp;objname = 0 )<tt> [protected]</tt>
</h3>
This is an overloaded member function, provided for convenience. It behaves essentially like the above function.
<p> Creates a database connection using the driver <em>driver</em>, with
the parent <em>parent</em> and the object name <em>objname</em>.
<p> <b>Warning:</b> The framework takes ownership of the <em>driver</em> pointer,
so it should not be deleted.

<h3 class=fn><a name="~QSqlDatabase"></a>QSqlDatabase::~QSqlDatabase ()
</h3>
Destroys the object and frees any allocated resources.

<h3 class=fn><a href="qsqldatabase.html">QSqlDatabase</a>&nbsp;* <a name="addDatabase"></a>QSqlDatabase::addDatabase ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;type, const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;connectionName = defaultConnection )<tt> [static]</tt>
</h3>
Adds a database to the list of database connections using the
driver <em>type</em> and the connection name <em>connectionName</em>.
<p> The database connection is referred to by <em>connectionName</em>. The
newly added database connection is returned. This pointer is owned
by QSqlDatabase and will be deleted on program exit or when
<a href="#removeDatabase">removeDatabase</a>() is called.
<p> If <em>connectionName</em> is not specified, the newly added database
connection becomes the default database connection for the
application, and subsequent calls to <a href="#database">database</a>() (without a
database name parameter) will return a pointer to it. If <em>connectionName</em> is given, use <a href="#database">database(connectionName)</a> to retrieve a pointer to the
database connection.
<p> <b>Warning:</b> If you add a database with the same name as an
existing database, the new database will replace the old one.
This will happen automatically if you call this function more
than once without specifying <em>connectionName</em>.
<p> <p>See also <a href="#database">database</a>() and <a href="#removeDatabase">removeDatabase</a>().

<p>Examples: <a href="sql.html#x2141">sql/overview/connect1/main.cpp</a>, <a href="sql.html#x2147">sql/overview/connection.cpp</a>, and <a href="sqltable-example.html#x2454">sql/sqltable/main.cpp</a>.
<h3 class=fn><a href="qsqldatabase.html">QSqlDatabase</a>&nbsp;* <a name="addDatabase-2"></a>QSqlDatabase::addDatabase ( <a href="qsqldriver.html">QSqlDriver</a>&nbsp;*&nbsp;driver, const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;connectionName = defaultConnection )<tt> [static]</tt>
</h3> This is an overloaded member function, provided for convenience. It behaves essentially like the above function.
<p> This function is useful if you need to set up the database
connection and instantiate the driver yourself. If you do this, it
is recommended that you include the driver code in your own
application. For example, setting up a custom PostgreSQL
connection and instantiating the <a href="sql-driver.html#QPSQL7">QPSQL7</a> driver can be done the
following way:
<p> <pre>
    #include "qtdir/src/sql/drivers/psql/qsql_psql.cpp"
    </pre>
 
(We assume that <tt>qtdir</tt> is the directory where Qt is installed.)
This will pull in the code that is needed to use the PostgreSQL
client library and to instantiate a QPSQLDriver object, assuming
that you have the PostgreSQL headers somewhere in your include
search path.
<p> <pre>
    PGconn* con = PQconnectdb( "host=server user=bart password=simpson dbname=springfield" );
    QPSQLDriver* drv =  new QPSQLDriver( con );
    QSqlDatabase* db = QSqlDatabase::<a href="#addDatabase">addDatabase</a>( drv ); // becomes the new default connection
    <a href="qsqlquery.html">QSqlQuery</a> q;
    q.<a href="qsqlquery.html#exec">exec</a>( "SELECT * FROM people" );
    ...
    </pre>
 
<p> The above code sets up a PostgreSQL connection and instantiates a
QPSQLDriver object. Next, <a href="#addDatabase">addDatabase</a>() is called to add the
connection to the known connections so that it can be used by the
Qt SQL classes. When a driver is instantiated with a connection
handle (or set of handles), Qt assumes that you have already
opened the database connection.
<p> Remember that you must link your application against the database
client library as well. The simplest way to do this is to add
lines like those below to your <tt>.pro</tt> file:
<p> <pre>
    unix:LIBS += -lpq
    win32:LIBS += libpqdll.lib
    </pre>
 
<p> You will need to have the client library in your linker's search
path.
<p> The method described above will work for all the drivers, the only
difference is the arguments the driver constructors take. Below is
an overview of the drivers and their constructor arguments.
<p> <center><table cellpadding="4" cellspacing="2" border="0">
<tr bgcolor="#a2c511"> <th valign="top">Driver <th valign="top">Class name <th valign="top">Constructor arguments <th valign="top">File to include
<tr bgcolor="#f0f0f0">
<td valign="top">QPSQL7
<td valign="top">QPSQLDriver
<td valign="top">PGconn* connection
<td valign="top"><tt>qsql_psql.cpp</tt>
<tr bgcolor="#d0d0d0">
<td valign="top"><a href="sql-driver.html#QMYSQL3">QMYSQL3</a>
<td valign="top">QMYSQLDriver
<td valign="top">MYSQL* connection
<td valign="top"><tt>qsql_mysql.cpp</tt>
<tr bgcolor="#f0f0f0">
<td valign="top"><a href="sql-driver.html#QOCI8">QOCI8</a>
<td valign="top">QOCIDriver
<td valign="top">OCIEnv* environment, OCIError* error, OCISvcCtx* serviceContext
<td valign="top"><tt>qsql_oci.cpp</tt>
<tr bgcolor="#d0d0d0">
<td valign="top"><a href="sql-driver.html#QODBC3">QODBC3</a>
<td valign="top">QODBCDriver
<td valign="top">SQLHANDLE environment, SQLHANDLE connection
<td valign="top"><tt>qsql_odbc.cpp</tt>
<tr bgcolor="#f0f0f0">
<td valign="top"><a href="sql-driver.html#QDB2">QDB2</a>
<td valign="top">QDB2
<td valign="top">SQLHANDLE environment, SQLHANDLE connection
<td valign="top"><tt>qsql_db2.cpp</tt>
<tr bgcolor="#d0d0d0">
<td valign="top"><a href="sql-driver.html#QTDS7">QTDS7</a>
<td valign="top">QTDSDriver
<td valign="top">LOGINREC* loginRecord, DBPROCESS* dbProcess, const <a href="qstring.html">QString</a>& hostName
<td valign="top"><tt>qsql_tds.cpp</tt>
<tr bgcolor="#f0f0f0">
<td valign="top"><a href="sql-driver.html#QSQLITE">QSQLITE</a>
<td valign="top">QSQLiteDriver
<td valign="top">sqlite* connection
<td valign="top"><tt>qsql_sqlite.cpp</tt>
<tr bgcolor="#d0d0d0">
<td valign="top"><a href="sql-driver.html#QIBASE">QIBASE</a>
<td valign="top">QIBaseDriver
<td valign="top">isc_db_handle connection
<td valign="top"><tt>qsql_ibase.cpp</tt>
</table></center>
<p> Note: The host name (or service name) is needed when constructing
the QTDSDriver for creating new connections for internal
queries. This is to prevent the simultaneous usage of several
<a href="qsqlquery.html">QSqlQuery</a>/<a href="qsqlcursor.html">QSqlCursor</a> objects from blocking each other.
<p> <b>Warning:</b> The SQL framework takes ownership of the <em>driver</em> pointer,
and it should not be deleted. The returned QSqlDatabase object is
owned by the framework and must not be deleted. If you want to
explicitly remove the connection, use <a href="#removeDatabase">removeDatabase</a>()
<p> <p>See also <a href="#drivers">drivers</a>().

<h3 class=fn>void <a name="close"></a>QSqlDatabase::close ()
</h3>
Closes the database connection, freeing any resources acquired.
<p> <p>See also <a href="#removeDatabase">removeDatabase</a>().

<h3 class=fn>bool <a name="commit"></a>QSqlDatabase::commit ()
</h3>
Commits a transaction to the database if the driver supports
transactions. Returns TRUE if the operation succeeded; otherwise
returns FALSE.
<p> <p>See also <a href="qsqldriver.html#hasFeature">QSqlDriver::hasFeature</a>() and <a href="#rollback">rollback</a>().

<h3 class=fn><a href="qstring.html">QString</a> <a name="connectOptions"></a>QSqlDatabase::connectOptions () const
</h3><p>Returns the database connect options.
See the <a href="qsqldatabase.html#connectOptions-prop">"connectOptions"</a> property for details.
<h3 class=fn>bool <a name="contains"></a>QSqlDatabase::contains ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;connectionName = defaultConnection )<tt> [static]</tt>
</h3>
Returns TRUE if the list of database connections contains <em>connectionName</em>; otherwise returns FALSE.

<h3 class=fn><a href="qsqldatabase.html">QSqlDatabase</a>&nbsp;* <a name="database"></a>QSqlDatabase::database ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;connectionName = defaultConnection, bool&nbsp;open = TRUE )<tt> [static]</tt>
</h3>
Returns the database connection called <em>connectionName</em>. The
database connection must have been previously added with
<a href="#addDatabase">addDatabase</a>(). If <em>open</em> is TRUE (the default) and the database
connection is not already open it is opened now. If no <em>connectionName</em> is specified the default connection is used. If <em>connectionName</em> does not exist in the list of databases, 0 is
returned. The pointer returned is owned by QSqlDatabase and should
<em>not</em> be deleted.
<p> <b>Warning:</b> There are restrictions on the use of database connections
in threaded applications. Please see the <a href="threads.html#threads-sql">Thread Support in Qt</a> document for more information about
threading and SQL databases.

<p>Examples: <a href="sql.html#x2156">sql/overview/basicbrowsing/main.cpp</a> and <a href="sql.html#x2155">sql/overview/create_connections/main.cpp</a>.
<h3 class=fn><a href="qstring.html">QString</a> <a name="databaseName"></a>QSqlDatabase::databaseName () const
</h3><p>Returns the name of the database.
See the <a href="qsqldatabase.html#databaseName-prop">"databaseName"</a> property for details.
<h3 class=fn><a href="qsqldriver.html">QSqlDriver</a>&nbsp;* <a name="driver"></a>QSqlDatabase::driver () const
</h3>
Returns the database driver used to access the database
connection.

<h3 class=fn><a href="qstring.html">QString</a> <a name="driverName"></a>QSqlDatabase::driverName () const
</h3>
Returns the name of the driver used by the database connection.

<h3 class=fn><a href="qstringlist.html">QStringList</a> <a name="drivers"></a>QSqlDatabase::drivers ()<tt> [static]</tt>
</h3>
Returns a list of all the available database drivers.
<p> Note that if you want to iterate over the list, you should iterate
over a copy, e.g.
<pre>
    <a href="qstringlist.html">QStringList</a> list = QSqlDatabase::<a href="#drivers">drivers</a>();
    QStringList::Iterator it = list.<a href="qvaluelist.html#begin">begin</a>();
    while( it != list.<a href="qvaluelist.html#end">end</a>() ) {
        myProcessing( *it );
        ++it;
    }
    </pre>
 

<h3 class=fn><a href="qsqlquery.html">QSqlQuery</a> <a name="exec"></a>QSqlDatabase::exec ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;query = QString::null ) const
</h3>
Executes a SQL statement (e.g. an <tt>INSERT</tt>, <tt>UPDATE</tt> or <tt>DELETE</tt> statement) on the database, and returns a <a href="qsqlquery.html">QSqlQuery</a> object.
Use <a href="#lastError">lastError</a>() to retrieve error information. If <em>query</em> is
<a href="qstring.html#QString-null">QString::null</a>, an empty, invalid query is returned and lastError()
is not affected.
<p> <p>See also <a href="qsqlquery.html">QSqlQuery</a> and <a href="#lastError">lastError</a>().

<h3 class=fn><a href="qstring.html">QString</a> <a name="hostName"></a>QSqlDatabase::hostName () const
</h3><p>Returns the host name where the database resides.
See the <a href="qsqldatabase.html#hostName-prop">"hostName"</a> property for details.
<h3 class=fn>bool <a name="isDriverAvailable"></a>QSqlDatabase::isDriverAvailable ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;name )<tt> [static]</tt>
</h3>
Returns TRUE if a driver called <em>name</em> is available; otherwise
returns FALSE.
<p> <p>See also <a href="#drivers">drivers</a>().

<h3 class=fn>bool <a name="isOpen"></a>QSqlDatabase::isOpen () const
</h3>
Returns TRUE if the database connection is currently open;
otherwise returns FALSE.

<h3 class=fn>bool <a name="isOpenError"></a>QSqlDatabase::isOpenError () const
</h3>
Returns TRUE if there was an error opening the database
connection; otherwise returns FALSE. Error information can be
retrieved using the <a href="#lastError">lastError</a>() function.

<h3 class=fn><a href="qsqlerror.html">QSqlError</a> <a name="lastError"></a>QSqlDatabase::lastError () const
</h3>
Returns information about the last error that occurred on the
database. See <a href="qsqlerror.html">QSqlError</a> for more information.

<p>Examples: <a href="sql.html#x2148">sql/overview/connection.cpp</a> and <a href="sqltable-example.html#x2455">sql/sqltable/main.cpp</a>.
<h3 class=fn>bool <a name="open"></a>QSqlDatabase::open ()
</h3>
Opens the database connection using the current connection values.
Returns TRUE on success; otherwise returns FALSE. Error
information can be retrieved using the <a href="#lastError">lastError</a>() function.
<p> <p>See also <a href="#lastError">lastError</a>().

<p>Examples: <a href="sql.html#x2142">sql/overview/connect1/main.cpp</a>, <a href="sql.html#x2149">sql/overview/connection.cpp</a>, and <a href="sqltable-example.html#x2456">sql/sqltable/main.cpp</a>.
<h3 class=fn>bool <a name="open-2"></a>QSqlDatabase::open ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;user, const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;password )
</h3>
This is an overloaded member function, provided for convenience. It behaves essentially like the above function.
<p> Opens the database connection using the given <em>user</em> name and <em>password</em>. Returns TRUE on success; otherwise returns FALSE. Error
information can be retrieved using the <a href="#lastError">lastError</a>() function.
<p> This function does not store the password it is given. Instead,
the password is passed directly to the driver for opening a
connection and is then discarded.
<p> <p>See also <a href="#lastError">lastError</a>().

<h3 class=fn><a href="qstring.html">QString</a> <a name="password"></a>QSqlDatabase::password () const
</h3><p>Returns the password used to connect to the database.
See the <a href="qsqldatabase.html#password-prop">"password"</a> property for details.
<h3 class=fn>int <a name="port"></a>QSqlDatabase::port () const
</h3><p>Returns the port used to connect to the database.
See the <a href="qsqldatabase.html#port-prop">"port"</a> property for details.
<h3 class=fn><a href="qsqlindex.html">QSqlIndex</a> <a name="primaryIndex"></a>QSqlDatabase::primaryIndex ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;tablename ) const
</h3>
Returns the primary index for table <em>tablename</em>. If no primary
index exists an empty <a href="qsqlindex.html">QSqlIndex</a> will be returned.

<h3 class=fn><a href="qsqlrecord.html">QSqlRecord</a> <a name="record"></a>QSqlDatabase::record ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;tablename ) const
</h3>
Returns a <a href="qsqlrecord.html">QSqlRecord</a> populated with the names of all the fields in
the table (or view) called <em>tablename</em>. The order in which the
fields appear in the record is undefined. If no such table (or
view) exists, an empty record is returned.
<p> <p>See also <a href="#recordInfo">recordInfo</a>().

<h3 class=fn><a href="qsqlrecord.html">QSqlRecord</a> <a name="record-2"></a>QSqlDatabase::record ( const&nbsp;<a href="qsqlquery.html">QSqlQuery</a>&nbsp;&amp;&nbsp;query ) const
</h3>
This is an overloaded member function, provided for convenience. It behaves essentially like the above function.
<p> Returns a <a href="qsqlrecord.html">QSqlRecord</a> populated with the names of all the fields
used in the SQL <em>query</em>. If the query is a "SELECT *" the order
in which fields appear in the record is undefined.
<p> <p>See also <a href="#recordInfo">recordInfo</a>().

<h3 class=fn><a href="qsqlrecordinfo.html">QSqlRecordInfo</a> <a name="recordInfo"></a>QSqlDatabase::recordInfo ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;tablename ) const
</h3>
Returns a <a href="qsqlrecordinfo.html">QSqlRecordInfo</a> populated with meta data about the table
or view <em>tablename</em>. If no such table (or view) exists, an empty
record is returned.
<p> <p>See also <a href="qsqlrecordinfo.html">QSqlRecordInfo</a>, <a href="qsqlfieldinfo.html">QSqlFieldInfo</a>, and <a href="#record">record</a>().

<h3 class=fn><a href="qsqlrecordinfo.html">QSqlRecordInfo</a> <a name="recordInfo-2"></a>QSqlDatabase::recordInfo ( const&nbsp;<a href="qsqlquery.html">QSqlQuery</a>&nbsp;&amp;&nbsp;query ) const
</h3>
This is an overloaded member function, provided for convenience. It behaves essentially like the above function.
<p> Returns a <a href="qsqlrecordinfo.html">QSqlRecordInfo</a> object with meta data for the <a href="qsqlquery.html">QSqlQuery</a>
<em>query</em>. Note that this overloaded function may return less
information than the <a href="#recordInfo">recordInfo</a>() function which takes the name of
a table as parameter.
<p> <p>See also <a href="qsqlrecordinfo.html">QSqlRecordInfo</a>, <a href="qsqlfieldinfo.html">QSqlFieldInfo</a>, and <a href="#record">record</a>().

<h3 class=fn>void <a name="registerSqlDriver"></a>QSqlDatabase::registerSqlDriver ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;name, const&nbsp;QSqlDriverCreatorBase&nbsp;*&nbsp;creator )<tt> [static]</tt>
</h3>
This function registers a new SQL driver called <em>name</em>, within
the SQL framework. This is useful if you have a custom SQL driver
and don't want to compile it as a plugin.
<p> Example usage:
<p> <pre>
    QSqlDatabase::<a href="#registerSqlDriver">registerSqlDriver</a>( "MYDRIVER", new QSqlDriverCreator&lt;MyDatabaseDriver&gt; );
    QSqlDatabase* db = QSqlDatabase::<a href="#addDatabase">addDatabase</a>( "MYDRIVER" );
    ...
    </pre>
 
<p> <b>Warning:</b> The framework takes ownership of the <em>creator</em> pointer,
so it should not be deleted.

<h3 class=fn>void <a name="removeDatabase"></a>QSqlDatabase::removeDatabase ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;connectionName )<tt> [static]</tt>
</h3>
Removes the database connection <em>connectionName</em> from the list of
database connections.
<p> <b>Warning:</b> There should be no open queries on the database
connection when this function is called, otherwise a resource leak
will occur.

<h3 class=fn>void <a name="removeDatabase-2"></a>QSqlDatabase::removeDatabase ( <a href="qsqldatabase.html">QSqlDatabase</a>&nbsp;*&nbsp;db )<tt> [static]</tt>
</h3>
This is an overloaded member function, provided for convenience. It behaves essentially like the above function.
<p> Removes the database connection <em>db</em> from the list of database
connections. The QSqlDatabase object is destroyed when it is removed
from the list.
<p> <b>Warning:</b> The <em>db</em> pointer is not valid after this function has
been called. There should be no open queries on the database
connection when this function is called, otherwise a resource leak
will occur.

<h3 class=fn>bool <a name="rollback"></a>QSqlDatabase::rollback ()
</h3>
Rolls a transaction back on the database if the driver supports
transactions. Returns TRUE if the operation succeeded; otherwise
returns FALSE.
<p> <p>See also <a href="qsqldriver.html#hasFeature">QSqlDriver::hasFeature</a>(), <a href="#commit">commit</a>(), and <a href="#transaction">transaction</a>().

<h3 class=fn>void <a name="setConnectOptions"></a>QSqlDatabase::setConnectOptions ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;options = QString::null )
</h3><p>Sets the database connect options to <em>options</em>.
See the <a href="qsqldatabase.html#connectOptions-prop">"connectOptions"</a> property for details.
<h3 class=fn>void <a name="setDatabaseName"></a>QSqlDatabase::setDatabaseName ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;name )<tt> [virtual]</tt>
</h3><p>Sets the name of the database to <em>name</em>.
See the <a href="qsqldatabase.html#databaseName-prop">"databaseName"</a> property for details.
<h3 class=fn>void <a name="setHostName"></a>QSqlDatabase::setHostName ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;host )<tt> [virtual]</tt>
</h3><p>Sets the host name where the database resides to <em>host</em>.
See the <a href="qsqldatabase.html#hostName-prop">"hostName"</a> property for details.
<h3 class=fn>void <a name="setPassword"></a>QSqlDatabase::setPassword ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;password )<tt> [virtual]</tt>
</h3><p>Sets the password used to connect to the database to <em>password</em>.
See the <a href="qsqldatabase.html#password-prop">"password"</a> property for details.
<h3 class=fn>void <a name="setPort"></a>QSqlDatabase::setPort ( int&nbsp;p )<tt> [virtual]</tt>
</h3><p>Sets the port used to connect to the database to <em>p</em>.
See the <a href="qsqldatabase.html#port-prop">"port"</a> property for details.
<h3 class=fn>void <a name="setUserName"></a>QSqlDatabase::setUserName ( const&nbsp;<a href="qstring.html">QString</a>&nbsp;&amp;&nbsp;name )<tt> [virtual]</tt>
</h3><p>Sets the user name connected to the database to <em>name</em>.
See the <a href="qsqldatabase.html#userName-prop">"userName"</a> property for details.
<h3 class=fn><a href="qstringlist.html">QStringList</a> <a name="tables"></a>QSqlDatabase::tables ( <a href="qsql.html#TableType-enum">QSql::TableType</a>&nbsp;type ) const
</h3>
Returns a list of the database's tables, system tables and views,
as specified by the parameter <em>type</em>.
<p> Note that if you want to iterate over the list, you should iterate
over a copy, e.g.
<pre>
    <a href="qstringlist.html">QStringList</a> list = myDatabase.tables( QSql::Tables | QSql::Views );
    QStringList::Iterator it = list.<a href="qvaluelist.html#begin">begin</a>();
    while( it != list.<a href="qvaluelist.html#end">end</a>() ) {
        myProcessing( *it );
        ++it;
    }
    </pre>
 

<p>Example: <a href="sqltable-example.html#x2461">sql/sqltable/main.cpp</a>.
<h3 class=fn><a href="qstringlist.html">QStringList</a> <a name="tables-2"></a>QSqlDatabase::tables () const
</h3>
This is an overloaded member function, provided for convenience. It behaves essentially like the above function.
<p> Returns a list of the database's tables that are visible to the
user. To include views or system tables, use the version of this
function that takes a table <tt>type</tt> parameter.
<p> Note that if you want to iterate over the list, you should iterate
over a copy, e.g.
<pre>
    <a href="qstringlist.html">QStringList</a> list = myDatabase.tables();
    QStringList::Iterator it = list.<a href="qvaluelist.html#begin">begin</a>();
    while( it != list.<a href="qvaluelist.html#end">end</a>() ) {
        myProcessing( *it );
        ++it;
    }
    </pre>
 

<h3 class=fn>bool <a name="transaction"></a>QSqlDatabase::transaction ()
</h3>
Begins a transaction on the database if the driver supports
transactions. Returns TRUE if the operation succeeded; otherwise
returns FALSE.
<p> <p>See also <a href="qsqldriver.html#hasFeature">QSqlDriver::hasFeature</a>(), <a href="#commit">commit</a>(), and <a href="#rollback">rollback</a>().

<h3 class=fn><a href="qstring.html">QString</a> <a name="userName"></a>QSqlDatabase::userName () const
</h3><p>Returns the user name connected to the database.
See the <a href="qsqldatabase.html#userName-prop">"userName"</a> property for details.
<hr><h2>Property Documentation</h2>
<h3 class=fn><a href="qstring.html">QString</a> <a name="connectOptions-prop"></a>connectOptions</h3>
<p>This property holds the database connect options.
<p>The format of the options string is a semi-colon separated list of
option names or option = value pairs. The options depend on the
database client used:
<p> <center><table cellpadding="4" cellspacing="2" border="0">
<tr bgcolor="#a2c511"> <th valign="top">ODBC <th valign="top">MySQL <th valign="top">PostgreSQL
<tr bgcolor="#f0f0f0">
<p> <td valign="top">
<ul>
<li> SQL_ATTR_ACCESS_MODE
<li> SQL_ATTR_LOGIN_TIMEOUT
<li> SQL_ATTR_CONNECTION_TIMEOUT
<li> SQL_ATTR_CURRENT_CATALOG
<li> SQL_ATTR_METADATA_ID
<li> SQL_ATTR_PACKET_SIZE
<li> SQL_ATTR_TRACEFILE
<li> SQL_ATTR_TRACE
</ul>
<p> <td valign="top">
<ul>
<li> CLIENT_COMPRESS
<li> CLIENT_FOUND_ROWS
<li> CLIENT_IGNORE_SPACE
<li> CLIENT_SSL
<li> CLIENT_ODBC
<li> CLIENT_NO_SCHEMA
<li> CLIENT_INTERACTIVE
</ul>
<p> <td valign="top">
<ul>
<li> connect_timeout
<li> options
<li> tty
<li> requiressl
<li> service
</ul>
<tr bgcolor="#a2c511"> <th valign="top">DB2 <th valign="top">OCI <th valign="top">TDS
<tr bgcolor="#d0d0d0">
<p> <td valign="top">
<ul>
<li> SQL_ATTR_ACCESS_MODE
<li> SQL_ATTR_LOGIN_TIMEOUT
</ul>
<p> <td valign="top">
<em>none</em>
<p> <td valign="top">
<em>none</em>
<p> </table></center>
<p> Example of usage:
<pre>
    ...
    // MySQL connection
    db-&gt;setConnectOptions( "CLIENT_SSL;CLIENT_IGNORE_SPACE" ); // use an SSL connection to the server
    if ( !db-&gt;open() ) {
        db-&gt;setConnectOptions(); // clears the connect option string
        ...
    }
    ...
    // PostgreSQL connection
    db-&gt;setConnectOptions( "requiressl=1" ); // enable PostgreSQL SSL connections
    if ( !db-&gt;open() ) {
        db-&gt;setConnectOptions(); // clear options
        ...
    }
    ...
    // ODBC connection
    db-&gt;setConnectOptions( "SQL_ATTR_ACCESS_MODE=SQL_MODE_READ_ONLY;SQL_ATTR_TRACE=SQL_OPT_TRACE_ON" ); // set ODBC options
    if ( !db-&gt;open() ) {
        db-&gt;setConnectOptions(); // don't try to set this option
        ...
    }
    </pre>
 
<p> Please refer to the client library documentation for more
information about the different options. The options will be set
prior to opening the database connection. Setting new options
without re-opening the connection does nothing.
<p> <p>See also 
<p>Set this property's value with <a href="#setConnectOptions">setConnectOptions</a>() and get this property's value with <a href="#connectOptions">connectOptions</a>().
<h3 class=fn><a href="qstring.html">QString</a> <a name="databaseName-prop"></a>databaseName</h3>
<p>This property holds the name of the database.
<p>Note that the database name is the TNS Service Name for the <a href="sql-driver.html#QOCI8">QOCI8</a>
(Oracle) driver.
<p> For the <a href="sql-driver.html#QODBC3">QODBC3</a> driver it can either be a DSN, a DSN filename (the
file must have a <tt>.dsn</tt> extension), or a connection string. MS
Access users can for example use the following connection string
to open a <tt>.mdb</tt> file directly, instead of having to create a DSN
entry in the ODBC manager:
<p> <pre>
    ...
    db = QSqlDatabase::<a href="#addDatabase">addDatabase</a>( "QODBC3" );
    db-&gt;setDatabaseName( "DRIVER={Microsoft Access Driver (*.mdb)};FIL={MS Access};DBQ=myaccessfile.mdb" );
    if ( db-&gt;open() ) {
        // success!
    }
    ...
    </pre>
 
("FIL" is the required spelling in Microsoft's API.)
<p> There is no default value.

<p>Set this property's value with <a href="#setDatabaseName">setDatabaseName</a>() and get this property's value with <a href="#databaseName">databaseName</a>().
<h3 class=fn><a href="qstring.html">QString</a> <a name="hostName-prop"></a>hostName</h3>
<p>This property holds the host name where the database resides.
<p>There is no default value.

<p>Set this property's value with <a href="#setHostName">setHostName</a>() and get this property's value with <a href="#hostName">hostName</a>().
<h3 class=fn><a href="qstring.html">QString</a> <a name="password-prop"></a>password</h3>
<p>This property holds the password used to connect to the database.
<p>There is no default value.
<p> <b>Warning:</b> This function stores the password in plain text within
Qt. Use the <a href="#open">open</a>() call that takes a password as parameter to
avoid this behaviour.
<p> <p>See also <a href="#open">open</a>().

<p>Set this property's value with <a href="#setPassword">setPassword</a>() and get this property's value with <a href="#password">password</a>().
<h3 class=fn>int <a name="port-prop"></a>port</h3>
<p>This property holds the port used to connect to the database.
<p>There is no default value.

<p>Set this property's value with <a href="#setPort">setPort</a>() and get this property's value with <a href="#port">port</a>().
<h3 class=fn><a href="qstring.html">QString</a> <a name="userName-prop"></a>userName</h3>
<p>This property holds the user name connected to the database.
<p>There is no default value.

<p>Set this property's value with <a href="#setUserName">setUserName</a>() and get this property's value with <a href="#userName">userName</a>().
<!-- eof -->
<hr><p>
This file is part of the <a href="index.html">Qt toolkit</a>.
Copyright &copy; 1995-2007
<a href="http://www.trolltech.com/">Trolltech</a>. All Rights Reserved.<p><address><hr><div align=center>
<table width=100% cellspacing=0 border=0><tr>
<td>Copyright &copy; 2007
<a href="troll.html">Trolltech</a><td align=center><a href="trademarks.html">Trademarks</a>
<td align=right><div align=right>Qt 3.3.8</div>
</table></div></address></body>
</html>
